# AWS Organizations 組織管理システム 要件定義書

## 1. 概要

### 1.1. はじめに
本書は、AWS Organizationsの管理アカウントのシステムにおける要件を定義するものである。
ポートフォリオ目的のシステムとなるが、商用利用を想定したシステムを作成する。但し、コストが発生する内容についてはコスト効率を優先する。

### 1.2. プロジェクトの背景
AWSを利用するにあたり、ベストプラクティスであるAWS Organizationsを利用して一元管理する。管理アカウント側に用意するシステムについて定義する。

### 1.3. プロジェクトの目的

*   複数アカウントの効率的な一元管理（OU）。
*   セキュリティガバナンスの強化（SCP）。
*   コスト管理の最適化と簡素化（原則、コストは発生しない想定）。

## 2. システム概要

### 2.1. システム全体像
MGCPを参照

### 2.2. システム構成図
`システム構成図.drawio`を参照

### 2.3. 利用者
内部システムのため、関係者のみが対象。

## 3. 機能要件

本システム（AWS Organizations管理基盤）は、組織のAWSアカウントを安全かつ効率的に管理するための統制機能を提供する。

### 3.1. 機能一覧

| 機能カテゴリ | 機能ID | 機能名 | 優先度 | 概要 |
| :--- | :--- | :--- | :--- | :--- |
| **アカウント管理** | F-ORG-001 | メンバーアカウントのプロビジョニング機能 | 高 | IaC（Infrastructure as Code）を用いて、新規AWSアカウントを標準化された設定（OU配置、ガードレール適用）で払い出す。 |
| **セキュリティ統制** | F-ORG-002 | 予防的ガードレール機能 (SCP) | 高 | サービスコントロールポリシー（SCP）を用いて、組織全体で禁止・制限したい操作（例: 特定リージョン外での活動、ルートユーザーの操作）を強制的にブロックする。 |
| | F-ORG-003 | 発見的ガードレール機能 | 高 | IAM Access AnalyzerやTrusted Advisor等を活用し、意図しないリソース公開やベストプラクティスからの逸脱を事後的に検知・通知する。 |
| **コスト管理** | F-ORG-004 | コスト監視・通知機能 | 高 | AWS Budgetsを利用し、設定した予算に対する実績値や予測値がしきい値を超えた場合に、管理者へアラートを通知する。 |
| **アクセス管理** | F-ORG-005 | シングルサインオン (SSO) 機能 | 高 | IAM Identity Centerを利用し、ユーザーが単一の認証情報で複数のAWSアカウントへ安全にアクセスできる環境を提供する。 |

### 3.2. 機能詳細
各機能の具体的な実現方式については、`【AWS組織管理】基本設計書`にて定義する。

## 4. 非機能要件

本管理基盤が、組織全体のAWS利用を安定的かつ安全に支えるために満たすべき品質要件を定義する。

| 項目 | 要件 |
| :--- | :--- |
| **セキュリティ (Security)** | ・**管理アカウントの保護:** 管理アカウントへのアクセスは、緊急時を除きSSO経由の読み取り専用ロールに限定する。特権操作が必要な場合は、MFAで保護された特定の管理者ロールにスイッチして行う。<br>・**機密情報の管理:** アクセスキーのような静的な認証情報に依存せず、動的な認証を原則とする。アプリケーションの機密情報は、構成管理コードには一切含めないこと。<br>・**状態ファイルの保護:** 構成管理ツールの状態ファイルは、暗号化が有効化されたバックエンドで安全に保管し、開発者のローカル環境には保存しないこと。<br>**・認証情報の棚卸し: 定期的にIAM認証情報レポートを取得・監査し、長期間未使用のアクセスキーの無効化や、MFA未設定ユーザーへの設定を促す運用を行う。** |
| **信頼性・可用性 (Reliability / Availability)** | ・**構成管理の信頼性:** インフラの構成はすべてコードで定義し（Infrastructure as Code）、手動での変更は原則禁止とする。すべての変更は、バージョン管理システム上でのレビューと、適用前の影響範囲確認を経て適用されること。<br>・**マルチリージョン障害への耐性:** 本管理基盤を構成する主要サービス（AWS Organizations, IAM Identity Center, Route 53）は、AWSが提供する高可用なグローバルサービスまたはマルチAZサービスを利用する。 |
| **運用・保守性 (Operability / Maintainability)** | ・**コードの可読性:** 構成管理コードは、標準的な規約に従い、第三者が見ても理解しやすい構造を維持する。<br>・**監査証跡の確保:** 誰が、いつ、どのインフラに変更を加えたかの証跡が、バージョン管理システムと構成管理ツールの実行履歴、**およびCloudTrail組織証跡によって一元管理されたAPI操作ログ**の両方で追跡可能であること。<br>・**テスト容易性:** インフラの変更を適用する前に、その影響範囲を事前にレビューできること。 |
| **パフォーマンス (Performance)** | ・**構成変更の適用時間:** 構成変更の適用（apply）は、リソース数が増加しても現実的な時間（例: 15分以内）で完了すること。 |
| **コスト効率 (Cost Efficiency)** | ・**管理コストの最適化:** 本管理基盤自体の運用コストは、月額\$5未満に抑えることを目標とする。<br>・**コストの可視化:** AWS Organizationsの一括請求機能とAWS Budgetsを活用し、組織全体のコストと各アカウントのコスト内訳を常に把握できる状態を維持する。 |

## 5. その他

### 5.1. 制約事項・前提条件

本管理基盤の設計・構築・運用における制約事項および前提条件を以下に定める。

*   **主要なAWSサービス:**
    *   **組織・アカウント管理:** AWS Organizations
    *   **認証・アクセス管理:** AWS IAM Identity Center
    *   **コスト管理:** AWS Budgets
    *   **監査・セキュリティ監視:** **AWS CloudTrail, AWS IAM Access Analyzer, AWS Trusted Advisor**
    *   **DNS管理:** Amazon Route 53

*   **対象リージョン:**
    *   インフラリソースを構築するプライマリリージョンは、**東京リージョン (`ap-northeast-1`)** とする。